# üéØ Prompt Master: Dashboard Analytics de Alta Performance

## üìö INSTRU√á√ïES OBRIGAT√ìRIAS DE LEITURA DO REPOSIT√ìRIO

### üîç PASSO 1: An√°lise Autom√°tica do Projeto

Antes de iniciar a constru√ß√£o, voc√™ DEVE executar as seguintes a√ß√µes:

#### A. Ler Documenta√ß√£o do Projeto

```bash
# Localize e leia TODOS os arquivos de documenta√ß√£o:
1. Buscar e ler: /docs/README.md
2. Buscar e ler: /docs/ARCHITECTURE.md
3. Buscar e ler: /docs/API.md ou /docs/api/
4. Buscar e ler: /ROADMAP.md na raiz do projeto
5. Buscar e ler: /CHANGELOG.md para entender evolu√ß√£o
6. Buscar e ler: package.json para entender depend√™ncias e scripts
```

**Conte√∫do que voc√™ DEVE extrair:**

- ‚úÖ Estrutura de dados existente (modelos, schemas, entidades)
- ‚úÖ APIs dispon√≠veis e seus endpoints
- ‚úÖ Conven√ß√µes de c√≥digo do projeto (naming, estrutura de pastas)
- ‚úÖ Tecnologias e bibliotecas j√° implementadas
- ‚úÖ Padr√µes de autentica√ß√£o e autoriza√ß√£o
- ‚úÖ Features planejadas no roadmap que impactam m√©tricas

#### B. Mapear Estrutura de Dados

```bash
# Identifique os arquivos de modelo de dados:
1. Procurar em: /src/models/ ou /models/
2. Procurar em: /src/types/ ou /types/ (TypeScript)
3. Procurar em: /prisma/schema.prisma (se usar Prisma)
4. Procurar em: /src/database/ ou /db/
5. Procurar em: /src/api/ para entender endpoints de dados
```

**Informa√ß√µes CR√çTICAS a identificar:**

- üìä Entidades principais (Users, Orders, Products, etc.)
- üîó Relacionamentos entre entidades
- üìà Campos que podem gerar m√©tricas (timestamps, status, valores)
- üéØ KPIs j√° implementados ou calculados no backend
- üî¢ Tipos de dados (num√©ricos, datas, categ√≥ricos)

#### C. Verificar APIs e Servi√ßos

```bash
# Mapeie os endpoints dispon√≠veis:
1. Ler: /src/api/routes/ ou /src/routes/
2. Ler: /src/controllers/ para entender l√≥gica de neg√≥cio
3. Ler: /src/services/ para identificar c√°lculos existentes
4. Buscar por: "analytics", "metrics", "reports", "dashboard"
```

**O que voc√™ DEVE documentar:**

- üåê Endpoints REST dispon√≠veis
- üîå WebSockets para dados em tempo real (se houver)
- üì¶ Formato de resposta das APIs (JSON schema)
- üöÄ Rate limits ou pagina√ß√£o implementada
- üîê Headers de autentica√ß√£o necess√°rios

---

## üé® PROMPT PRINCIPAL PARA DASHBOARD

### Contexto de Neg√≥cio

**Voc√™ √© um Arquiteto de Analytics especializado em criar dashboards modernos, interativos e data-driven. Sua miss√£o √© construir um dashboard completo que:**

1. **Integre perfeitamente** com a base de c√≥digo existente do projeto
2. **Respeite os padr√µes** j√° estabelecidos na documenta√ß√£o
3. **Reutilize APIs** e servi√ßos j√° implementados
4. **Siga o roadmap** para alinhar com features futuras
5. **Entregue insights acion√°veis** atrav√©s de visualiza√ß√µes inteligentes

---

## üìã ESPECIFICA√á√ïES T√âCNICAS DO DASHBOARD

### Fase 1: Defini√ß√£o de Prop√≥sito (Baseado em GoodData Best Practices)

#### Perguntas Obrigat√≥rias para Responder:

**Sobre os Usu√°rios:**

1. **Quem s√£o os usu√°rios?** (Executivos, Analistas, Gestores, Clientes?)
2. **Qual problema eles precisam resolver?** (Monitorar vendas, reduzir churn, otimizar convers√£o?)
3. **Com que frequ√™ncia usar√£o?** (Di√°rio, semanal, em momentos espec√≠ficos?)
4. **Que decis√µes tomar√£o baseadas nos dados?** (Aprovar or√ßamento, ajustar campanha, alocar recursos?)
5. **Qual n√≠vel de detalhe precisam?** (Vis√£o macro ou drill-down profundo?)

**Tipos de Dashboard (escolha 1):**

- üìä **Strategic Dashboard** - Alta gest√£o, KPIs macro, tend√™ncias de longo prazo
- üìà **Analytical Dashboard** - Analistas, drill-downs profundos, compara√ß√µes complexas
- üéØ **Operational Dashboard** - Gest√£o di√°ria, m√©tricas em tempo real, alertas
- üì± **Tactical Dashboard** - Equipes espec√≠ficas, m√©tricas departamentais, metas curto prazo

---

### Fase 2: Arquitetura de Dados

#### A. Modelo de Dados L√≥gico (LDM - Logical Data Model)

**Voc√™ DEVE criar um LDM que:**

```javascript
// Exemplo de estrutura LDM para o dashboard
const dataModel = {
	entities: {
		// Entidades principais (lidas do /src/models/)
		users: {
			attributes: ['id', 'name', 'email', 'created_at', 'plan_type'],
			metrics: ['total_users', 'new_users', 'active_users', 'churn_rate'],
		},
		orders: {
			attributes: ['id', 'user_id', 'status', 'created_at', 'total_amount'],
			metrics: ['total_revenue', 'avg_order_value', 'conversion_rate'],
		},
		products: {
			attributes: ['id', 'name', 'category', 'price'],
			metrics: ['total_products', 'top_selling', 'inventory_turnover'],
		},
	},

	relationships: [
		// Relacionamentos identificados no c√≥digo
		{ from: 'orders.user_id', to: 'users.id', type: 'many-to-one' },
		{ from: 'order_items.product_id', to: 'products.id', type: 'many-to-one' },
	],

	calculations: {
		// M√©tricas derivadas (reutilizar do backend se existir)
		mrr: 'SUM(subscriptions.amount WHERE billing_cycle = "monthly")',
		cac: 'SUM(marketing_costs) / COUNT(new_customers)',
		ltv: 'AVG(customer_lifetime_value)',
	},
};
```

**Prioridades do LDM:**

- ‚úÖ **Single Source of Truth** - M√©tricas calculadas uma vez, usadas em toda parte
- ‚úÖ **Reusabilidade** - Componentes podem ser usados em m√∫ltiplos dashboards
- ‚úÖ **Consist√™ncia** - Mesma m√©trica sempre retorna mesmo valor
- ‚úÖ **Performance** - Agrega√ß√µes pr√©-calculadas quando poss√≠vel

#### B. Fontes de Dados

**Conex√£o com Backend (escolha baseado no que existe no repo):**

```typescript
// Op√ß√£o 1: REST API (verificar em /src/api/)
const fetchDashboardData = async () => {
	const [users, revenue, metrics] = await Promise.all([
		fetch('/api/analytics/users'),
		fetch('/api/analytics/revenue'),
		fetch('/api/analytics/metrics'),
	]);
	// Processar e combinar dados
};

// Op√ß√£o 2: GraphQL (se dispon√≠vel em /src/graphql/)
const DASHBOARD_QUERY = gql`
	query DashboardData {
		userMetrics {
			total
			active
			churn
		}
		revenueMetrics {
			mrr
			arr
			growth
		}
		conversionFunnel {
			stage
			count
			rate
		}
	}
`;

// Op√ß√£o 3: WebSocket (tempo real - verificar em /src/sockets/)
const socket = io('/analytics');
socket.on('metrics:update', (data) => {
	updateDashboard(data);
});
```

**Tratamento de Dados:**

```typescript
// Pipeline de processamento de dados
interface DataPipeline {
	// 1. Extract - Puxar dados das APIs
	extract: () => Promise<RawData[]>;

	// 2. Transform - Limpar, agregar, calcular
	transform: (data: RawData[]) => ProcessedData;

	// 3. Load - Preparar para visualiza√ß√£o
	load: (data: ProcessedData) => VisualizationData;

	// 4. Cache - Armazenar para performance
	cache: (data: VisualizationData, ttl: number) => void;
}
```

---

### Fase 3: Arquitetura de Interface

#### Layout e Wireframe (Baseado em Information Architecture)

**Grid System (escolha 1):**

- **Executive Layout** - 2x2 grid, 4 KPIs principais, foco em trends
- **Analytics Layout** - Sidebar + Main, filtros √† esquerda, gr√°ficos √† direita
- **Operational Layout** - Cards em cascata, prioridade por urg√™ncia
- **Mixed Layout** - Hero metrics no topo, grid de detalhes abaixo

**Exemplo de Estrutura:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  HEADER: T√≠tulo, Per√≠odo, Filtros Globais, Export      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ KPI Card 1   ‚îÇ KPI Card 2   ‚îÇ KPI Card 3   ‚îÇ KPI Card 4‚îÇ
‚îÇ Œî +15%       ‚îÇ Œî -3%        ‚îÇ Œî +8%        ‚îÇ Œî +12%    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  PRIMARY CHART - Tend√™ncia temporal principal           ‚îÇ
‚îÇ  (Line chart, √°rea, coluna)                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  SECONDARY CHART 1            ‚îÇ  SECONDARY CHART 2      ‚îÇ
‚îÇ  (Breakdown por categoria)    ‚îÇ  (Compara√ß√£o per√≠odos)  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  TABLE - Top performers / Detalhes granulares           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### Princ√≠pios de Navigation

**Hierarquia de Informa√ß√£o:**

1. **Primary KPIs** (Above the fold, 3-5 m√©tricas cr√≠ticas)
2. **Trend Visualization** (Gr√°fico principal de tend√™ncia)
3. **Breakdown & Comparison** (An√°lises secund√°rias)
4. **Detailed Data** (Tabelas, drill-downs)

**Interatividade:**

- ‚úÖ **Filtros Globais** - Aplicam a todo dashboard (data range, segmento, regi√£o)
- ‚úÖ **Filtros Locais** - Espec√≠ficos de cada visualiza√ß√£o
- ‚úÖ **Drill-Down** - Clicar em categoria ‚Üí Ver detalhes
- ‚úÖ **Drill-Through** - Navegar para dashboard relacionado
- ‚úÖ **Tooltips** - Hover para ver valores exatos e contexto
- ‚úÖ **Cross-Filtering** - Sele√ß√£o em um gr√°fico filtra os outros

---

### Fase 4: Visualiza√ß√µes e Componentes

#### Biblioteca de Componentes (escolha baseado no stack do projeto)

**Op√ß√µes de Charting Library:**

```typescript
// Op√ß√£o 1: Recharts (React, simples, declarativo)
import { LineChart, BarChart, PieChart, AreaChart } from 'recharts';

// Op√ß√£o 2: Chart.js (Flex√≠vel, canvas-based)
import { Line, Bar, Doughnut, Radar } from 'react-chartjs-2';

// Op√ß√£o 3: D3.js (M√°xima customiza√ß√£o, curva aprendizado alta)
import * as d3 from 'd3';

// Op√ß√£o 4: Plotly (Interativo, cient√≠fico)
import Plot from 'react-plotly.js';

// Op√ß√£o 5: Apache ECharts (Enterprise, rico em features)
import ReactECharts from 'echarts-for-react';
```

**Escolha a biblioteca baseado em:**

- üìä J√° existe no package.json? ‚Üí Reutilizar
- üé® N√≠vel de customiza√ß√£o necess√°rio? ‚Üí D3 > ECharts > Recharts
- üöÄ Performance cr√≠tica? ‚Üí Canvas (Chart.js, ECharts) > SVG (Recharts)
- üì± Mobile-first? ‚Üí Recharts (responsivo nativo)

#### Cat√°logo de Visualiza√ß√µes

**Por Tipo de Insight:**

| Objetivo              | Visualiza√ß√£o Recomendada   | Quando Usar                              |
| --------------------- | -------------------------- | ---------------------------------------- |
| **Comparar valores**  | Bar Chart, Column Chart    | Vendas por regi√£o, produtos top          |
| **Mostrar tend√™ncia** | Line Chart, Area Chart     | Receita ao longo do tempo, crescimento   |
| **Propor√ß√£o do todo** | Pie Chart, Donut, Treemap  | Market share, distribui√ß√£o de categorias |
| **Distribui√ß√£o**      | Histogram, Box Plot        | Faixa et√°ria usu√°rios, pre√ßos produtos   |
| **Correla√ß√£o**        | Scatter Plot, Bubble Chart | LTV vs CAC, engajamento vs convers√£o     |
| **Ranking**           | Horizontal Bar Chart       | Top 10 produtos, melhores vendedores     |
| **Fluxo/Processo**    | Funnel Chart, Sankey       | Funil de vendas, jornada do usu√°rio      |
| **Geo**               | Map Chart, Heatmap         | Vendas por estado, calor de atividade    |
| **Tabela din√¢mica**   | Data Grid com sort/filter  | Listagem detalhada, exports              |

#### Componentes Reutiliz√°veis

```typescript
// KPI Card Component
interface KPICardProps {
	title: string;
	value: number | string;
	trend: { direction: 'up' | 'down'; percentage: number };
	icon: React.ReactNode;
	color: 'blue' | 'green' | 'red' | 'yellow';
	loading?: boolean;
}

// Chart Wrapper com estados
interface ChartWrapperProps {
	title: string;
	data: any[];
	loading: boolean;
	error: Error | null;
	onRefresh: () => void;
	children: React.ReactNode;
}

// Filter Component
interface FilterProps {
	type: 'date' | 'select' | 'multiselect' | 'search';
	label: string;
	options?: { value: string; label: string }[];
	onChange: (value: any) => void;
	value: any;
}

// Table Component com features
interface TableProps {
	columns: Column[];
	data: any[];
	sortable?: boolean;
	filterable?: boolean;
	exportable?: boolean;
	pagination?: { page: number; pageSize: number };
}
```

---

### Fase 5: Anima√ß√µes e Interatividade

#### Anima√ß√µes Obrigat√≥rias

**1. Loading States (Skeleton Screens)**

```typescript
// Evitar spinners gen√©ricos, usar skeletons contextuais
<KPISkeleton /> // Ret√¢ngulos pulsando no formato do KPI
<ChartSkeleton /> // Forma do gr√°fico em gray pulsando
<TableSkeleton rows={5} /> // Linhas de tabela carregando
```

**2. Data Updates (Smooth Transitions)**

```typescript
// Recharts com anima√ß√£o
<LineChart animationDuration={800} animationEasing="ease-in-out">
  {/* Charts atualizam suavemente quando data muda */}
</LineChart>

// Framer Motion para KPIs
<motion.div
  initial={{ scale: 0.8, opacity: 0 }}
  animate={{ scale: 1, opacity: 1 }}
  transition={{ duration: 0.5 }}
>
  <KPICard value={newValue} />
</motion.div>
```

**3. Micro-Interactions**

```css
/* Hover states para cards */
.kpi-card {
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.kpi-card:hover {
	transform: translateY(-4px);
	box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
}

/* Active states para filtros */
.filter-button.active {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	transform: scale(1.05);
}
```

**4. Contadores Animados**

```typescript
// Animar n√∫meros de 0 at√© valor final
const useCountUp = (end: number, duration: number = 2000) => {
	const [count, setCount] = useState(0);

	useEffect(() => {
		let start = 0;
		const increment = end / (duration / 16);

		const timer = setInterval(() => {
			start += increment;
			if (start >= end) {
				setCount(end);
				clearInterval(timer);
			} else {
				setCount(Math.floor(start));
			}
		}, 16);

		return () => clearInterval(timer);
	}, [end, duration]);

	return count;
};
```

**5. Chart Animations**

```typescript
// Stagger animation - elementos aparecem em sequ√™ncia
const staggerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1 // 100ms entre cada filho
    }
  }
};

<motion.div variants={staggerVariants} initial="hidden" animate="visible">
  {metrics.map((metric, i) => (
    <motion.div key={i} variants={{ hidden: { y: 20 }, visible: { y: 0 } }}>
      <KPICard {...metric} />
    </motion.div>
  ))}
</motion.div>
```

---

### Fase 6: Customiza√ß√£o Visual

#### Design System (Verificar se j√° existe em /src/styles/ ou /design-system/)

**Se N√ÉO existir design system:**

```typescript
// Criar tokens de design
export const designTokens = {
	colors: {
		// Primary
		primary: { 50: '#eff6ff', 500: '#3b82f6', 900: '#1e3a8a' },
		// Feedback
		success: { light: '#d1fae5', main: '#10b981', dark: '#065f46' },
		warning: { light: '#fef3c7', main: '#f59e0b', dark: '#92400e' },
		danger: { light: '#fee2e2', main: '#ef4444', dark: '#991b1b' },
		// Neutrals
		gray: { 50: '#f9fafb', 500: '#6b7280', 900: '#111827' },
	},

	typography: {
		heading1: { size: '2rem', weight: 700, lineHeight: 1.2 },
		heading2: { size: '1.5rem', weight: 600, lineHeight: 1.3 },
		body: { size: '1rem', weight: 400, lineHeight: 1.5 },
		caption: { size: '0.875rem', weight: 400, lineHeight: 1.4 },
	},

	spacing: {
		xs: '0.25rem',
		sm: '0.5rem',
		md: '1rem',
		lg: '1.5rem',
		xl: '2rem',
		'2xl': '3rem',
	},

	shadows: {
		sm: '0 1px 2px 0 rgba(0, 0, 0, 0.05)',
		md: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
		lg: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',
	},

	borderRadius: {
		sm: '0.25rem',
		md: '0.5rem',
		lg: '0.75rem',
		full: '9999px',
	},
};
```

**Se J√Å existir:** Importar e usar tokens existentes!

#### Paletas de Cores para Gr√°ficos

**Data Visualization Colors (Science-Based):**

```typescript
// Sequencial (para valores ordenados - baixo a alto)
const sequential = ['#eff6ff', '#bfdbfe', '#60a5fa', '#2563eb', '#1e40af'];

// Divergente (para compara√ß√µes - negativo/neutro/positivo)
const divergent = ['#dc2626', '#f87171', '#f3f4f6', '#34d399', '#059669'];

// Categ√≥rico (para categorias distintas - m√°ximo 8)
const categorical = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06b6d4', '#ec4899', '#6366f1'];

// Acessibilidade (colorblind-friendly)
const accessible = ['#0173b2', '#de8f05', '#029e73', '#cc78bc', '#ca9161'];
```

#### Temas (Light / Dark Mode)

```typescript
const theme = {
	light: {
		background: '#ffffff',
		surface: '#f9fafb',
		text: { primary: '#111827', secondary: '#6b7280' },
		border: '#e5e7eb',
		chart: { grid: '#f3f4f6', axis: '#d1d5db' },
	},
	dark: {
		background: '#0f172a',
		surface: '#1e293b',
		text: { primary: '#f1f5f9', secondary: '#94a3b8' },
		border: '#334155',
		chart: { grid: '#1e293b', axis: '#475569' },
	},
};
```

---

### Fase 7: Performance e Otimiza√ß√£o

#### Checklist de Performance

**1. Data Fetching**

```typescript
// ‚úÖ Usar React Query ou SWR para cache e revalidation
import { useQuery } from '@tanstack/react-query';

const { data, isLoading } = useQuery({
	queryKey: ['dashboard', filters],
	queryFn: () => fetchDashboardData(filters),
	staleTime: 5 * 60 * 1000, // 5 minutos
	cacheTime: 10 * 60 * 1000, // 10 minutos
});

// ‚úÖ Debounce em filtros que acionam fetch
const debouncedSearch = useDebouncedValue(searchTerm, 500);
```

**2. Rendering Optimization**

```typescript
// ‚úÖ Memoizar componentes pesados
const ExpensiveChart = React.memo(({ data }) => (
  <ComplexVisualization data={data} />
), (prev, next) => prev.data === next.data);

// ‚úÖ Virtualiza√ß√£o para listas longas
import { useVirtualizer } from '@tanstack/react-virtual';
// Renderiza apenas itens vis√≠veis no viewport
```

**3. Bundle Size**

```typescript
// ‚úÖ Code splitting por rota
const DashboardPage = lazy(() => import('./pages/Dashboard'));

// ‚úÖ Tree-shaking de libraries
import { LineChart } from 'recharts'; // ‚úÖ Espec√≠fico
import * as Recharts from 'recharts'; // ‚ùå Importa tudo
```

**4. Data Processing**

```typescript
// ‚úÖ Processar dados no backend quando poss√≠vel
// ‚ùå Evitar: Receber 10k registros e processar no frontend
// ‚úÖ Fazer: Backend retorna dados j√° agregados

// ‚úÖ Web Workers para processamento pesado
const worker = new Worker('./dataProcessor.worker.ts');
worker.postMessage(largeDataset);
worker.onmessage = (e) => setProcessedData(e.data);
```

---

### Fase 8: Testes e Valida√ß√£o

#### Matriz de Testes

**1. Testes Funcionais**

```typescript
// Testar c√°lculo de m√©tricas
describe('Dashboard Metrics', () => {
	it('calcula MRR corretamente', () => {
		const subscriptions = [
			{ amount: 100, cycle: 'monthly' },
			{ amount: 50, cycle: 'monthly' },
		];
		expect(calculateMRR(subscriptions)).toBe(150);
	});
});

// Testar filtros
it('filtra dados por per√≠odo', () => {
	const filtered = filterByDateRange(data, { start: '2024-01-01', end: '2024-01-31' });
	expect(filtered.every((d) => d.date >= '2024-01-01' && d.date <= '2024-01-31')).toBe(true);
});
```

**2. Testes de Performance**

```typescript
// Medir tempo de renderiza√ß√£o
import { render, screen } from '@testing-library/react';
import { performance } from 'perf_hooks';

it('renderiza dashboard em menos de 2s', async () => {
  const start = performance.now();
  render(<Dashboard />);
  await screen.findByText('Revenue');
  const end = performance.now();

  expect(end - start).toBeLessThan(2000);
});
```

**3. Testes Visuais (Screenshot)**

```typescript
import { test, expect } from '@playwright/test';

test('dashboard visual regression', async ({ page }) => {
	await page.goto('/dashboard');
	await page.waitForSelector('.chart');
	await expect(page).toHaveScreenshot('dashboard.png');
});
```

**4. Testes de Acessibilidade**

```typescript
import { axe, toHaveNoViolations } from 'jest-axe';

it('n√£o tem viola√ß√µes de acessibilidade', async () => {
  const { container } = render(<Dashboard />);
  const results = await axe(container);
  expect(results).toHaveNoViolations();
});
```

---

### Fase 9: Documenta√ß√£o e Deploy

#### Documenta√ß√£o a Criar

**1. README.md do Dashboard**

```markdown
# Analytics Dashboard

## M√©tricas Dispon√≠veis

- **MRR**: Monthly Recurring Revenue - Calculado como soma de...
- **CAC**: Customer Acquisition Cost - Total gasto / Novos clientes
- **Churn Rate**: Taxa de cancelamento mensal

## Filtros

- Data Range: √öltimos 7/30/90 dias ou customizado
- Segmento: Enterprise, SMB, Startup
- Regi√£o: BR, US, EU

## Como Atualizar M√©tricas

1. Adicionar c√°lculo em `/src/services/metricsService.ts`
2. Atualizar tipo em `/src/types/metrics.ts`
3. Adicionar visualiza√ß√£o em `/src/components/charts/`

## Troubleshooting

- **Dados n√£o carregam**: Verificar endpoint em Network tab
- **Gr√°fico quebrado**: Validar formato de data em `transformData()`
```

**2. ARCHITECTURE.md - Se√ß√£o Dashboard**

```markdown
## Dashboard Architecture

### Data Flow

API ‚Üí React Query Cache ‚Üí Transform Layer ‚Üí Visualization Components

### State Management

- Global filters: Zustand store
- Chart data: React Query
- UI state: Local useState

### Performance Strategies

- Debounced filters (500ms)
- Memoized expensive calculations
- Virtualized tables (>100 rows)
- Cached API responses (5min TTL)
```

---

## üöÄ PROMPT FINAL EXECUT√ÅVEL

Use este prompt depois de ler toda documenta√ß√£o do projeto:

---

**PROMPT:**

"Voc√™ √© um Arquiteto de Analytics Senior. Analise completamente o reposit√≥rio seguindo estas etapas OBRIGAT√ìRIAS:

**ETAPA 1 - AN√ÅLISE DO REPOSIT√ìRIO**

1. Leia e resuma: `/docs/README.md`, `/docs/ARCHITECTURE.md`, `/ROADMAP.md`
2. Identifique modelos de dados em: `/src/models/`, `/src/types/`, `/prisma/`
3. Mapeie APIs em: `/src/api/`, `/src/routes/`, `/src/controllers/`
4. Liste depend√™ncias relevantes do `package.json`
5. Identifique padr√µes de c√≥digo (naming, estrutura, estado global)

**ETAPA 2 - MODELAGEM DE DADOS**
Com base no que voc√™ encontrou, crie:

1. Logical Data Model (LDM) com entidades, atributos e relacionamentos
2. Lista de m√©tricas poss√≠veis baseadas nos dados existentes
3. Endpoints de API necess√°rios (reutilizar existentes ou propor novos)

**ETAPA 3 - DESIGN DO DASHBOARD**
Crie um dashboard [TIPO: Strategic/Analytical/Operational/Tactical] para [USU√ÅRIO: Executivos/Analistas/etc] que responda estas perguntas de neg√≥cio:

- [PERGUNTA 1: Ex: Qual nossa receita mensal recorrente?]
- [PERGUNTA 2: Ex: Qual taxa de churn este m√™s?]
- [PERGUNTA 3: Ex: Quais produtos mais vendidos?]

**ETAPA 4 - IMPLEMENTA√á√ÉO**
Construa em React + TypeScript usando:

- Biblioteca de charts: [Recharts/Chart.js/D3] (escolher baseado no que j√° existe)
- Gerenciamento de estado: [React Query + Zustand/Redux/Context]
- Estilo: Tailwind CSS + Design tokens do projeto (se existir)
- Componentes: Baseados em shadcn/ui ou biblioteca UI do projeto

**FEATURES OBRIGAT√ìRIAS:**
‚úÖ KPI Cards animados com trends
‚úÖ Filtros globais (data range, segmenta√ß√£o)
‚úÖ 3-5 visualiza√ß√µes principais (line, bar, pie, table)
‚úÖ Drill-down em pelo menos 1 gr√°fico
‚úÖ Loading states (skeleton screens)
‚úÖ Error handling com retry
‚úÖ Responsive mobile-first
‚úÖ Dark mode toggle
‚úÖ Export para PDF/CSV

**ETAPA 5 - PERFORMANCE**
Implemente:

- React Query para cache (5min stale time)
- Debounce em filtros (500ms)
- Memoiza√ß√£o de c√°lculos pesados
- Lazy loading de gr√°ficos abaixo do fold

**ENTREG√ÅVEIS:**

1. C√≥digo completo do dashboard em 1 arquivo React (artifact)
2. README.md com documenta√ß√£o de uso
3. Lista de endpoints necess√°rios (novos ou existentes)
4. Sugest√µes de otimiza√ß√£o baseadas no c√≥digo atual"

---

## üìä EXEMPLOS DE DASHBOARDS POR NICHO

### SaaS B2B

**KPIs Principais:**

- MRR (Monthly Recurring Revenue)
- Churn Rate
- CAC (Customer Acquisition Cost)
- LTV:CAC Ratio
- Active Users (DAU/MAU)

**Visualiza√ß√µes:**

- MRR Growth (Line chart com tend√™ncia)
- Churn by Cohort (Stacked area chart)
- CAC vs LTV (Scatter plot)
- Signup Funnel (Funnel chart)
- Top Features Usage (Horizontal bar)

---

### E-commerce

**KPIs Principais:**

- GMV (Gross Merchandise Value)
- Conversion Rate
- Average Order Value
- Cart Abandonment Rate
- Customer Lifetime Value

**Visualiza√ß√µes:**

- Revenue Trend (Area chart)
- Top Products (Bar chart)
- Geo Sales Map (Choropleth map)
- Conversion Funnel (Funnel chart)
- Cohort Retention (Heatmap)

---

### Marketing

**KPIs Principais:**

- Leads Gerados
- CPL (Cost per Lead)
- Conversion Rate (Lead ‚Üí SQL)
- ROAS (Return on Ad Spend)
- Engagement Rate

**Visualiza√ß√µes:**

- Lead Source Breakdown (Donut chart)
- Campaign Performance (Grouped bar)
- Landing Page Conversion (Table sortable)
- Social Media Reach (Line multi-series)
- Email Performance (Metrics cards)

---

### Financeiro

**KPIs Principais:**

- Revenue
- EBITDA
- Cash Flow
- Burn Rate
- Runway (meses)

**Visualiza√ß√µes:**

- P&L Statement (Waterfall chart)
- Cash Flow (Area chart positivo/negativo)
- Budget vs Actual (Grouped column)
- Expense Breakdown (Treemap)
- Financial Ratios (Gauge charts)

---

## ‚ö° QUICK START TEMPLATES

### Template 1: Executive Dashboard (Strategic)

```typescript
import { useState } from 'react';
import { LineChart, Line, BarChart, Bar, PieChart, Pie } from 'recharts';

const ExecutiveDashboard = () => {
  const [period, setPeriod] = useState('month');

  return (
    <div className="grid grid-cols-4 gap-6 p-6">
      {/* KPI Row */}
      <KPICard title="Revenue" value="$1.2M" trend="+15%" />
      <KPICard title="Users" value="45.2K" trend="+8%" />
      <KPICard title="MRR" value="$850K" trend="+12%" />
      <KPICard title="Churn" value="2.3%" trend="-0.5%" />

      {/* Main Chart */}
      <div className="col-span-4">
        <RevenueChart data={data} period={period} />
      </div>

      {/* Secondary Charts */}
      <div className="col-span-2">
        <UserGrowthChart />
      </div>
      <div className="col-span-2">
        <ConversionFunnel />
      </div>
    </div>
  );
};
```

### Template 2: Analytical Dashboard (Deep Dive)

```typescript
const AnalyticalDashboard = () => {
  const [filters, setFilters] = useState({
    dateRange: 'last30days',
    segment: 'all',
    region: 'all'
  });

  return (
    <div className="flex h-screen">
      {/* Sidebar de Filtros */}
      <aside className="w-64 bg-gray-50 p-4">
        <DateRangeFilter onChange={(v) => setFilters({...filters, dateRange: v})} />
        <SegmentFilter onChange={(v) => setFilters({...filters, segment: v})} />
        <RegionFilter onChange={(v) => setFilters({...filters, region: v})} />
      </aside>

      {/* Main Content */}
      <main className="flex-1 overflow-auto p-6">
        <MetricCards filters={filters} />
        <TrendAnalysis filters={filters} />
        <CohortAnalysis filters={filters} />
        <DetailedTable filters={filters} exportable />
      </main>
    </div>
  );
};
```

### Template 3: Real-Time Operational Dashboard

```typescript
const OperationalDashboard = () => {
  // WebSocket para dados em tempo real
  const { data: liveMetrics } = useWebSocket('/ws/metrics');

  return (
    <div className="grid grid-cols-6 gap-4 p-4">
      {/* Alert Banner */}
      {liveMetrics.alerts.length > 0 && (
        <AlertBanner alerts={liveMetrics.alerts} />
      )}

      {/* Live KPIs */}
      <LiveKPI label="Orders/min" value={liveMetrics.ordersPerMin} />
      <LiveKPI label="Active Users" value={liveMetrics.activeUsers} />
      <LiveKPI label="Error Rate" value={liveMetrics.errorRate} alert />

      {/* Real-time Charts */}
      <div className="col-span-4">
        <StreamingChart data={liveMetrics.timeSeries} />
      </div>

      {/* Recent Activity Log */}
      <div className="col-span-2">
        <ActivityFeed items={liveMetrics.recentActivity} />
      </div>
    </div>
  );
};
```

---

## üéØ CHECKLIST FINAL ANTES DE ENTREGAR

### Funcionalidade

- [ ] Todas m√©tricas calculam corretamente
- [ ] Filtros aplicam em todos gr√°ficos
- [ ] Drill-down funciona
- [ ] Export PDF/CSV implementado
- [ ] Loading states para todas async operations
- [ ] Error boundaries capturam crashes

### Performance

- [ ] Dashboard carrega em < 3s (First Contentful Paint)
- [ ] Filtros n√£o travam (debounced)
- [ ] Gr√°ficos renderizam suavemente
- [ ] Tabelas com +100 linhas s√£o virtualizadas
- [ ] Bundle size < 500KB (gzipped)

### UX/UI

- [ ] Responsivo mobile (testado em 375px, 768px, 1440px)
- [ ] Dark mode implementado
- [ ] Tooltips explicativos nos KPIs
- [ ] Empty states (quando n√£o h√° dados)
- [ ] Feedback visual em todas intera√ß√µes

### C√≥digo

- [ ] TypeScript sem `any`
- [ ] Componentes reutiliz√°veis
- [ ] Testes unit√°rios (>80% coverage)
- [ ] Documenta√ß√£o inline (JSDoc)
- [ ] Segue padr√µes do projeto

### Acessibilidade

- [ ] ARIA labels em gr√°ficos
- [ ] Navega√ß√£o por teclado
- [ ] Contraste adequado (WCAG AA)
- [ ] Screen reader friendly
- [ ] Cores n√£o dependem apenas de cor (patterns/textures)

### Deploy

- [ ] Vari√°veis de ambiente configuradas
- [ ] Build passa sem warnings
- [ ] Documenta√ß√£o atualizada
- [ ] CHANGELOG.md atualizado
- [ ] Demo/preview dispon√≠vel

---

## üÜò TROUBLESHOOTING COMUM

### "Dados n√£o aparecem nos gr√°ficos"

```typescript
// Verificar:
1. Console.log(data) ‚Üí Estrutura est√° correta?
2. Network tab ‚Üí API retornou 200?
3. Data transformation ‚Üí Keys batem com esperado?

// Debug:
console.log('Raw data:', rawData);
console.log('Transformed:', transformedData);
console.log('Chart expects:', { x: 'date', y: 'value' });
```

### "Gr√°fico quebra ao mudar filtro"

```typescript
// Causa: Data shape muda entre filtros
// Solu√ß√£o: Normalizar sempre para mesma estrutura

const normalizeData = (data) => {
	return data.map((d) => ({
		x: d.date || d.timestamp || d.x,
		y: d.value || d.amount || d.y,
	}));
};
```

### "Performance ruim com muitos dados"

```typescript
// Estrat√©gias:
1. Agrega√ß√£o no backend (10k points ‚Üí 100 points)
2. Virtualize tabelas (react-window)
3. Throttle re-renders (useMemo, React.memo)
4. Web Worker para c√°lculos (offload main thread)
```

### "Layout quebra no mobile"

```typescript
// Use grid responsivo:
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
  {/* Auto-ajusta baseado em breakpoint */}
</div>

// Esconda elementos menos cr√≠ticos:
<div className="hidden lg:block">
  <DetailedChart />
</div>
```

---

**FIM DO PROMPT MASTER**

Use este documento como refer√™ncia completa para criar dashboards de n√≠vel enterprise que integram perfeitamente com qualquer codebase existente.
